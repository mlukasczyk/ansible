terminal length 50
!
alias wrnet
   10 copy running-config startup-config
   20 cli vrf management
   30 copy running-config tftp:192.168.1.3/R1-confg
   40 cli vrf default
!
clock timezone US/Eastern
!
queue-monitor length
!
load-interval default 30
!
enable password sha512 $6$0nkYfo.py1IIh2lk$A4CVap/q8H44jOC5iXZMfk9HNdLX90nD1WAIucpI6uuUZxQijA66tm3uLtOKwiZjgvXsml1jPutbM.EsHR2Sh0
!
username admin privilege 15 role network-admin secret sha512 $6$CpLK53JIqkOFCoH/$/CcubVlg3f4bhbMD.VAlQPWFi8awsbSWrwVOQ4s2YsKbLo5mDiDsZqAOf.wFKYU7cKe8PospRYVz/6qaVfCfd0
!
vrf instance management
!
interface {{ mgmt_interface }}
   vrf management
   ip address {{ mgmt_ip_address }}
   no shutdown
!
no ip routing vrf manage
!
ip route vrf management 0.0.0.0/0 {{ mgmt_gateway }} name MANAGEMENT_DEFAULT
!
errdisable recovery interval 60
errdisable recovery cause link-flap
errdisable recovery cause bpduguard
!
hostname {{ hostname }}
!
{% for host in logging_hosts %}
logging vrf manage host {{ host.address }} 514
{% endfor %}
logging buffered 100000 notifications
logging facility local7
logging vrf manage source-interface {{ mgmt_interface }}
!
ip access-list standard snmp_ro_acl
{% for rule in snmp_ro_acl %}
   {{rule.seq}} {{rule.action}} {{rule.rule}}
{% endfor %}
!
ip access-list standard snmp_rw_acl
{% for rule in snmp_rw_acl %}
   {{rule.seq}} {{rule.action}} {{rule.rule}}
{% endfor %}
!
ntp local-interface vrf manage {{ mgmt_interface }}
{% for host in ntp_hosts %}
{% if host['prefer'] %}
ntp server vrf manage {{ host.address }} prefer
{% else %}
ntp server vrf manage {{ host.address }}
{% endif %}
{% endfor %}
!
snmp-server local-interface {{ mgmt_interface }}
snmp-server enable traps
snmp-server local-interface {{ mgmt_interface }}
snmp-server enable traps
{% for opt in snmp_options %}
snmp-server location {{ opt.location }}
snmp-server contact {{ opt.contact }}
{%   for trap in opt.traps %}
snmp-server enable trap {{ trap }}
{%   endfor %}
{% endfor %}
snmp-server vrf manage
snmp-server host {{ snmp_trap_server }} vrf manage informs version 2c toucan
snmp-server community toucan ro snmp_ro_acl
snmp-server community peregrim rw snmp_rw_acl
!
spanning-tree mode rapid-pvst
spanning-tree guard loop default
!
banner login
NOTICE TO USERS

If you don't belong here exit now.

EOF
!
management api http-commands
   no shutdown
   !
   vrf management
      no shutdown
!
management console
   idle-timeout 0
!
management ssh
   idle-timeout 10
   shutdown
   !
   vrf management
      no shutdown
!























